<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<header th:fragment="headerFragment" class="header">
	<div class="header__inner">
		<a href="/" class="logo"><span>BMAPS</span></a>
		<div class="info" id="logout_Form" >
			<ul>
				<li>
					<input id="logout" type="button" class="info__btn" value="로그아웃"/>
				</li>
			</ul>
		</div>
		<div class="info" id="login_Form">
			<ul>
				<li>
					<a href="/login" class="info__btn">로그인</a>
				</li>
				<li>
					<a href="/register" class="info__btn">회원가입</a>
				</li>
			</ul>
		</div>
	</div>
	<script type="text/javascript">

		$(function() {
			// 저장된 쿠키의 insert_id 받아오기
			insert_id_Check();
			// 로그아웃
			$("#logout").on('click',function(){
				logout();
			});
		});

		function insert_id_Check(){
			const insert_id = getCookie("insert_id");
			if(insert_id===null){
				$("#logout_Form").css('display','none');
				$("#login_Form").css('display','block');
				$("#loginBtn").css('display','block');
				$("#registerBtn").css('display','block');
			}else{
				// $("#insert_id").text(insert_id);
				$("#loginBtn").css('display','none');
				$("#registerBtn").css('display','none');
				$("#login_Form").css('display','none');
				$("#logout_Form").css('display','block');
				location.href = "/loginindex";
			}
		}

		function logout(){
			setCookie("JwtAccessToken",null, 0);
			setCookie("JwtRefreshToken",null, 0);
			setCookie("insert_id",null, 0);
			setCookie("userrole",null, 0);
			setCookie("username",null, 0);
			location.href="/index"
		}

	</script>
</header>
</html>
